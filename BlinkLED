package Simple_Phidgets;

import com.phidget22.*;

public class BlinkLED {
    // Handle Exceptions
    public static void main(String[] args) {
        try {
            // Create DigitalOutput instance for the green LED
            DigitalOutput greenLED = new DigitalOutput();
            
            // Address: Set the hub port for the green LED (change as needed)
            greenLED.setHubPort(1); // Assuming the green LED is connected to hub port 1
            greenLED.setIsHubPortDevice(true);

            // Open the LED with a timeout of 1000 milliseconds
            greenLED.open(1000);

            // Set the duration for how long the LED should blink (in milliseconds)
            long blinkDuration = 10000; // 10 seconds
            long startTime = System.currentTimeMillis(); // Get the current time

            // Blink the LED indefinitely until the time limit is reached
            while (System.currentTimeMillis() - startTime < blinkDuration) {
                greenLED.setState(true);  // Turn the LED on
                System.out.println("Green LED is ON.");
                Thread.sleep(500);         // Wait for 0.5 seconds
                greenLED.setState(false); // Turn the LED off
                System.out.println("Green LED is OFF.");
                Thread.sleep(500);         // Wait for 0.5 seconds
            }

            // Close the LED after use
            greenLED.close();
            System.out.println("Green LED closed.");
        } catch (PhidgetException e) {
            System.err.println("Phidget Exception: " + e.getDescription());
        } catch (InterruptedException e) {
            Thread.currentThread().interrupt(); // Restore interrupted status
            System.err.println("Thread was interrupted: " + e.getMessage());
        }
    }
}
